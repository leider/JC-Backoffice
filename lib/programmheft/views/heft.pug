extends ../../../views/layout
include ../../../views/formComponents

mixin panelView(groupedVeranstaltungen)
  -var count = 0
  -var nearFuture = moment(); nearFuture.add(1, 'months')
  for month in Object.keys(groupedVeranstaltungen)
    -var veranstOfMonth = groupedVeranstaltungen[month]
    .row
      for veranstaltung in veranstOfMonth
        -var kopf = veranstaltung.kopf()
        -var id = 'panel' + ++count
        .col-xl-4.col-md-6
          .card.mb-2
            a(href=veranstaltung.fullyQualifiedUrl() + '/presse')
              .card-header.p-0
                h6 #{veranstaltung.datumForDisplayShort()}
                h6 #{kopf.presseIn()}
                h5 #{kopf.titel()}
            | !{veranstaltung.renderedPresseText()}

block title
  | Programmheft #{date}

block content
  .col-12
    .page-header
      h1 Programmheft #{date}
    if (unconfirmedVeranstaltungen.length > 0)
      h2.text-danger Es gibt noch unbestÃ¤tigte Veranstaltungen
      for veranstaltung in unconfirmedVeranstaltungen
        p.text-danger #{veranstaltung.kopf().titel()}
    +panelView(groupedVeranstaltungen)
